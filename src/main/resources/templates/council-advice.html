<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–°–æ–≤–µ—Ç –ø–æ –æ–¥–µ–∂–¥–µ</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/advice.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<div class="wrapper">
    <header class="header">
        <h1 class="title">
            <span>W</span><span>e</span><span>a</span><span>t</span><span>h</span><span>e</span><span>r</span>
            <span>F</span><span>o</span><span>r</span><span>e</span><span>c</span><span>a</span><span>s</span><span>t</span>
        </h1>
    </header>

    <div class="container text-center mt-5">
        <h1>ü•º –°–æ–≤–µ—Ç –ø–æ –æ–¥–µ–∂–¥–µ üå°</h1>
        <div class="advice-box">
            <p class="lead advice-text" th:text="${advice}">–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–æ–≤–µ—Ç</p>
        </div>
        <a href="/view-weather" class="btn btn-custom mt-3">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
        <button id="save-advice-btn" class="btn btn-custom mt-3">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–≤–µ—Ç</button>
    </div>

    <footer class="footer">
        <div class="footer-buttons">
            <form th:action="@{/logout}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-fact">‚ï∞‚îà‚û§üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
            </form>
        </div>
        <p>&copy; 2025 Weather Forecast. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
</div>

<script>
    $(document).ready(function() {
        $("#save-advice-btn").click(function() {
            let adviceText = $(".advice-text").text();

            $.ajax({
                url: "/api/advice/save",
                type: "POST",
                data: { adviceText: adviceText },
                success: function(response) {
                    alert("‚úÖ " + response);
                },
                error: function(xhr) {
                    alert("‚ùå –û—à–∏–±–∫–∞: " + xhr.responseText);
                }
            });
        });
    });
</script>

</body>
</html>