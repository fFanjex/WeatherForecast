<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Weather Forecast</title>
    <link rel="stylesheet" href="/home.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
</head>
<body>
<header class="header">
    <h1 class="title">
        <span>W</span><span>e</span><span>a</span><span>t</span><span>h</span><span>e</span><span>r</span>
        <span>F</span><span>o</span><span>r</span><span>e</span><span>c</span><span>a</span><span>s</span><span>t</span>
    </h1>
    <form id="logout" action="/logout" method="post">
        <button class="logout-btn">Выход</button>
    </form>
</header>

<main class="main-content">
    <section class="description-section">
        <p>Добро пожаловать, пользователь <b id="user-id">...</b>!</p>
        <p>Сохранённый город: <b id="city-name">Загрузка...</b></p>
        <p>Получите актуальную информацию о погоде для любого города мира.</p>
    </section>

    <section class="button-section">
        <form action="/view-weather" method="get">
            <button class="action-btn">Посмотреть погоду в своем городе</button>
        </form>
        <form action="/interesting-fact" method="get">
            <button class="action-btn">Интересный факт</button>
        </form>
        <form action="/clothing-advice" method="get">
            <button class="action-btn">Посмотреть мои советы по одежде</button>
        </form>
    </section>
</main>

<footer class="footer">
    <p>&copy; 2025 Weather Forecast. Все права защищены.</p>
</footer>

<script>
    fetch('/api/home')
        .then(response => {
            if (!response.ok) {
                window.location.href = '/login';
                return;
            }
            return response.json();
        })
        .then(data => {
            document.getElementById('user-id').textContent = data.userId;
            document.getElementById('city-name').textContent = data.savedCity || 'не выбрано';
        })
        .catch(() => {
            document.getElementById('city-name').textContent = 'Ошибка загрузки';
        });
</script>
</body>
</html>