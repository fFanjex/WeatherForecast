<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WeatherForecast ‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑ 5 –¥–Ω–µ–π</title>
    <link rel="stylesheet" href="/weather-forecast.css" />
</head>
<body>
<div class="bg"></div>
<div class="noise"></div>

<header class="header">
    <div class="container header-inner">
        <a href="/home" class="chip">
            <span class="chip-ico">‚¨ÖÔ∏è</span>
            <span>–ù–∞ –≥–ª–∞–≤–Ω—É—é</span>
        </a>

        <div class="brand">
            <div class="logo" aria-hidden="true">WF</div>
            <div class="brand-text">
                <div class="brand-title" id="animated-title">
                    <span>W</span><span>e</span><span>a</span><span>t</span><span>h</span><span>e</span><span>r</span>
                    <span>F</span><span>o</span><span>r</span><span>e</span><span>c</span><span>a</span><span>s</span><span>t</span>
                </div>
                <div class="brand-subtitle">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π</div>
            </div>
        </div>

        <form th:action="@{/logout}" method="post" class="logout-form">
            <button type="submit" class="chip danger">
                <span class="chip-ico">üö™</span>
                <span>–í—ã–π—Ç–∏</span>
            </button>
        </form>
    </div>
</header>

<main class="main">
    <div class="container">
        <section class="card">
            <div class="card-head">
                <div class="badge">üìÖ Forecast</div>
                <div class="head-text">
                    <h1 class="page-title" th:text="'–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ ' + ${currentDate} + ' –≤ –≥–æ—Ä–æ–¥–µ ' + ${city}"></h1>
                    <p class="page-subtitle">–õ–∏—Å—Ç–∞–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏.</p>
                </div>
            </div>

            <div th:if="${forecastList}" class="table-wrap">
                <table class="table">
                    <thead>
                    <tr>
                        <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                        <th>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</th>
                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                        <th>–í–µ—Ç–µ—Ä</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="forecast : ${forecastList}">
                        <td th:text="${forecast.dtTxt}"></td>
                        <td>
                            <span class="temp">
                                <span th:text="${forecast.main.temp}"></span><span class="unit">¬∞C</span>
                            </span>
                        </td>
                        <td th:text="${forecast.weather[0].description}"></td>
                        <td>
                            <span th:text="${forecast.wind.speed}"></span><span class="unit"> –º/—Å</span>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <nav class="pager">
                    <a class="page-btn"
                       th:classappend="${currentPage == 1} ? ' disabled'"
                       th:href="@{/weather/forecast(city=${city}, page=${currentPage - 1})}">
                        ‚¨ÖÔ∏è –ù–∞–∑–∞–¥
                    </a>
                    <div class="page-indicator">
                        <span class="dot"></span>
                        <span th:text="${currentPage}"></span>
                        <span class="sep">/</span>
                        <span th:text="${totalPages}"></span>
                    </div>
                    <a class="page-btn"
                       th:classappend="${currentPage == totalPages} ? ' disabled'"
                       th:href="@{/weather/forecast(city=${city}, page=${currentPage + 1})}">
                        –í–ø–µ—Ä—ë–¥ ‚û°Ô∏è
                    </a>
                </nav>
            </div>

            <div th:if="${error}" class="alert">
                <div class="alert-title">–û—à–∏–±–∫–∞</div>
                <div class="alert-text" th:text="${error}"></div>
            </div>
        </section>
    </div>
</main>

<footer class="footer">
    <div class="container footer-inner">
        <p>¬© 2025 Weather Forecast ‚Ä¢ –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</p>
        <p class="footer-muted">Made with ‚òÅÔ∏è &amp; ‚òÄÔ∏è</p>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const spans = document.querySelectorAll('#animated-title span');
        spans.forEach((span, idx) => {
            span.style.opacity = '0';
            span.style.transition = 'opacity 0.4s ease';
            setTimeout(() => span.style.opacity = '1', idx * 70);
        });
    });
</script>
</body>
</html>